# Site settings
# Created by: Alexandra French on: 9/9/2020
# Last modified by: Alexandra French on 9/9/2020

<limit GET>
allow from all
</limit>

RewriteEngine On
RewriteBase /

# Redirect rules for php
#RedirectMatch 301 ^/home\.php$ /index.php

# Remove php from all php extension links
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [NC,L]

# Error pages
ErrorDocument 404 /404.php


# Disable server signature
ServerSignature Off

# All cache control and HSTS
<IfModule mod_headers.c>
  # Use HTTP Strict Transport Security to force secure headers, 1 week
  Header set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"

  # Cache control, 1 week
  <FilesMatch ".(css|jpg|jpeg|png|gif|js|ico|pdf|txt)$">
    Header set Cache-Control "max-age=604800, public"
  </FilesMatch>

  # Cache control, other page files, 1 day
  <FilesMatch ".(html|htm|php)$">
    Header set Cache-Control "max-age=86400, public"
  </FilesMatch>
</IfModule>

# Compression
<IfModule mod_deflate.c>
  # Compress all applicable file type
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
  AddOutputFilterByType DEFLATE application/x-font
  AddOutputFilterByType DEFLATE application/x-font-opentype
  AddOutputFilterByType DEFLATE application/x-font-otf
  AddOutputFilterByType DEFLATE application/x-font-truetype
  AddOutputFilterByType DEFLATE application/x-font-ttf
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE font/opentype
  AddOutputFilterByType DEFLATE font/otf
  AddOutputFilterByType DEFLATE font/ttf
  AddOutputFilterByType DEFLATE image/svg+xml
  AddOutputFilterByType DEFLATE image/x-icon
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/javascript
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/xml

  # Adjust for browser bugs
  BrowserMatch ^Mozilla/4 gzip-only-text/html
  BrowserMatch ^Mozilla/4\.0[678] no-gzip
  BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
  Header append Vary User-Agent
</IfModule>
